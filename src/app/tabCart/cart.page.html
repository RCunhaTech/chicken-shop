<ion-content color="dark">
  <div class="main">
    <div class="monitor">
      <span class="card" *ngFor="let monitor of productsMonitoring">
        <span>{{ monitor.shortName }}</span>
        <h6>{{ monitor.stock }}</h6>
      </span>
    </div>
    <div class="total">{{ itenService.total | async | currency }}</div>
  </div>
  <div class="main2">
    <div class="form-sale">
      <ion-row>
        <ion-col size="4">
          <ion-card>
            <ion-item>
              <ion-label position="floating">QTDE</ion-label>
              <ion-input type="text" name="quantity" [(ngModel)]="iten.quantity" readonly="true"></ion-input>
            </ion-item>
          </ion-card>
        </ion-col>
        <ion-col size="8">
          <ion-card>
            <ion-item>
              <ion-label position="floating">Código</ion-label>
              <ion-input #input type="text" [hidden]="disableTable" [(ngModel)]="enterCode"
                placeholder="Código de barra ou código do produto" name="search" (ionChange)="search($event)">
              </ion-input>
            </ion-item>
          </ion-card>
        </ion-col>
      </ion-row>
      <ion-row>
        <ion-col size="12">
          <ion-card>
            <ion-item>
              <span slot="start">%</span>
              <ion-label>Conceder Desconto</ion-label>
              <ion-toggle color="dark" slot="end" checked="false" (ionChange)="offerDiscount()"></ion-toggle>
            </ion-item>
          </ion-card>
        </ion-col>
      </ion-row>
      <ion-row>
        <ion-col size="6">
          <ion-card>
            <ion-item>
              <ion-label position="floating">Quantidade</ion-label>
              <ion-input type="text" name="quantity" disabled="true" [(ngModel)]="iten.quantity"></ion-input>
            </ion-item>
          </ion-card>
        </ion-col>
        <ion-col size="6">
          <ion-card>
            <ion-item>
              <ion-label position="floating">Preço</ion-label>
              <ion-input type="text" name="price" [disabled]="true" [ngModel]="iten.price | currency"></ion-input>
            </ion-item>
          </ion-card>
        </ion-col>
      </ion-row>
      <ion-row>
        <ion-col size="6">
          <ion-card>
            <ion-item>
              <ion-label position="floating">Desconto %</ion-label>
              <ion-input #inputPercentage type="text" name="percentage" [disabled]="disableInput"
                (ionChange)="makeDiscount()" [(ngModel)]="iten.percentage"></ion-input>
            </ion-item>
          </ion-card>
        </ion-col>
        <ion-col size="6">
          <ion-card>
            <ion-item>
              <ion-label position="floating">SubTotal</ion-label>
              <ion-input type="text" name="total" [disabled]="true" [ngModel]="iten.total | currency"
                readonly="true"></ion-input>
            </ion-item>
          </ion-card>
        </ion-col>
      </ion-row>
    </div>
    <div class="table-sale">
      <ion-grid [hidden]="disableTable">
        <ion-row>
          <ion-col size="5">Descrição</ion-col>
          <ion-col size="1">Qtde</ion-col>
          <ion-col size="2">Preço</ion-col>
          <ion-col size="2">Desconto</ion-col>
          <ion-col size="2">Subtotal</ion-col>
        </ion-row>
        <ion-row *ngFor="let iten of itenAsync | async" (click)="calcelIten(iten)">
          <ion-col size="5">{{ iten.description }}</ion-col>
          <ion-col size="1">{{ iten.quantity }}</ion-col>
          <ion-col size="2">{{ iten.price | currency }}</ion-col>
          <ion-col size="2">{{ iten.discount | currency }}</ion-col>
          <ion-col size="2">{{ iten.total | currency }}</ion-col>
        </ion-row>
      </ion-grid>
      <div class="free-cart" [hidden]="!disableTable">
        <img src="../../assets/cart-ok.png" alt="logo" style="width: 250px;">
        <h1>CAIXA LIVRE</h1>
      </div>
    </div>
  </div>
</ion-content>
